<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Day-4 Hexagon Builder</title>
<style>
  :root { --fg: #0b0f14; --muted: #6b7280; --border: #e5e7eb; }
  html, body { height: 100%; background: #fff; color: var(--fg); }
  body { margin: 0; font: 15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; }
  .wrap { max-width: 1200px; margin: 0 auto; padding: 16px; display: grid; gap: 14px; }
  h1 { margin: 0; font-size: clamp(18px, 3vw, 24px); }
  p { margin: 0; color: var(--muted); }
  .controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
  input[type=number] { width: 160px; padding: 8px 10px; border: 1px solid var(--border); border-radius: 10px; font: inherit; }
  button { cursor: pointer; border: 1px solid var(--border); background: #fff; border-radius: 10px; padding: 8px 12px; font-weight: 700; }
  .canvasWrap { border: 1px solid var(--border); border-radius: 12px; overflow: hidden; background: #fff; }
  svg { width: 100%; height: auto; display: block; background: #fff; }
  .hint { color: var(--muted); font-size: 12px; }
</style>
</head>
<body>
  <div class="wrap">
    <h1>Hexagons</h1>
    <p>Enter your available stick length, click calculate, and build your five hexagons. Displayed side by side with larger scale.</p>
    <div class="controls">
      <label for="avail"><strong>Available stick length (cm or inches)</strong></label>
      <input id="avail" type="number" step="0.1" min="1" placeholder="e.g., 18" value="20" />
      <button id="calc">Calculate Hexagons</button>
      <button id="download">Download PNG</button>
      <span class="hint">Works with cm or inches â€” the drawing is proportional.</span>
    </div>
    <div class="canvasWrap">
      <svg id="hexsvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 400" aria-label="Hexagon plan preview"></svg>
    </div>
  </div>
<script>
(function(){
  const BASE_EDGES = [20,17,15,12,10];
  const SVG_MARGIN = 20;
  const GAP = 30;
  const svg=document.getElementById('hexsvg');
  const input=document.getElementById('avail');
  const btnCalc=document.getElementById('calc');
  const btnDL=document.getElementById('download');
  const r1 = x => (Math.round(x*10)/10).toFixed(1);
  function computeScaled(avail){
    const maxBase = Math.max(...BASE_EDGES);
    const factor = avail / maxBase;
    return BASE_EDGES.map(v => +r1(v*factor));
  }
  function hexPoints(cx, cy, s){
    const pts=[];
    for(let k=0;k<6;k++){
      const a=(Math.PI/3)*k;
      pts.push([cx+s*Math.cos(a), cy+s*Math.sin(a)]);
    }
    return pts;
  }
  function drawSVG(scaled){
    while(svg.firstChild) svg.removeChild(svg.firstChild);
    const viewW = 1400;
    const sMax = Math.max(...scaled);
    const pxPerUnit = (viewW - 2*SVG_MARGIN - (scaled.length-1)*GAP) / (scaled.length*2*sMax) * 1.2; // scale up 20%
    svg.setAttribute('viewBox', `0 0 ${viewW} 400`);
    const centerY = 200;
    let offsetX = SVG_MARGIN;
    for(let i=0;i<scaled.length;i++){
      const s = scaled[i];
      const sidePx = s * pxPerUnit;
      const pts = hexPoints(offsetX+sidePx, centerY, sidePx)
        .map(([x,y]) => `${r1(x)},${r1(y)}`).join(' ');
      const poly=document.createElementNS('http://www.w3.org/2000/svg','polygon');
      poly.setAttribute('points', pts);
      poly.setAttribute('fill','none');
      poly.setAttribute('stroke','#000');
      poly.setAttribute('stroke-width','2');
      svg.appendChild(poly);
      const label=document.createElementNS('http://www.w3.org/2000/svg','text');
      label.setAttribute('x', offsetX+sidePx);
      label.setAttribute('y', centerY+sidePx+30);
      label.setAttribute('fill','#9ca3af');
      label.setAttribute('font-size','14');
      label.setAttribute('text-anchor','middle');
      label.textContent = `${r1(s)}`;
      svg.appendChild(label);
      offsetX += sidePx*2 + GAP;
    }
  }
  function downloadPNG(){
    const serializer=new XMLSerializer();
    const svgString=serializer.serializeToString(svg);
    const svgBlob=new Blob([svgString],{type:'image/svg+xml;charset=utf-8'});
    const url=URL.createObjectURL(svgBlob);
    const img=new Image();
    img.onload=function(){
      const vb=svg.viewBox.baseVal;
      const scale=2;
      const canvas=document.createElement('canvas');
      canvas.width=Math.ceil(vb.width*scale);
      canvas.height=Math.ceil(vb.height*scale);
      const ctx=canvas.getContext('2d');
      ctx.fillStyle='#fff';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.drawImage(img,0,0,canvas.width,canvas.height);
      const ts=new Date().toISOString().replace(/[:.]/g,'-');
      const a=document.createElement('a');
      a.download=`hexagon-plan_${ts}.png`;
      a.href=canvas.toDataURL('image/png');
      a.click();
      URL.revokeObjectURL(url);
    };
    img.src=url;
  }
  function recalc(){
    const val=parseFloat(input.value);
    const avail=isFinite(val)&&val>0?val:20;
    const scaled=computeScaled(avail);
    drawSVG(scaled);
  }
  btnCalc.addEventListener('click', recalc);
  btnDL.addEventListener('click', downloadPNG);
  window.addEventListener('resize', recalc);
  recalc();
})();
</script>
</body>
</html>
